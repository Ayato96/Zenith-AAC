<?php namespace App\Modules;

use Illuminate\Support\ServiceProvider;
use Route;
abstract class ModuleServiceProvider extends ServiceProvider {
	public function boot() {
		if ($module = $this->getModule(func_get_args())) {
			$this->package('app/'.$module, $module, app_path().'/modules/'.$module);
		}
	}

	public function register() {
		if ($module = $this->getModule(func_get_args())) {
			$this->app['config']->package('app/'.$module, app_path().'/modules/'.$module.'/config');
			
			echo $module;
			
			$routes = app_path().'/modules/'.$module.'/routes.php';
			if (file_exists($routes)) {
				require $routes;
			}
			
			$filters = app_path().'/modules/'.$module.'/filters.php';
			if (file_exists($filters)) {
				require $filters;
			}
		}
	}

	public function getModule($args) {
		return isset($args[0]) && is_string($args[0]) ? $args[0] : null;
	}
}
